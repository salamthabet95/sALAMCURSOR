# ๐๏ธ ุฏููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Database Setup Guide

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุฅูุดุงุก ูุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููููุน ุนูู Hostinger.

---

## ๐ ุงูุทุฑููุฉ 1: ุงุณุชุฎุฏุงู phpMyAdmin (ุงูุฃุณูู)

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. **ุงูุชุญ cPanel ุนูู Hostinger**
2. ุงุจุญุซ ุนู **"phpMyAdmin"** ุฃู **"MySQL Databases"**
3. ุงุฐูุจ ุฅูู **"Create Database"** ุฃู **"Create New Database"**
4. ุฃุฏุฎู ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช: `ramadan_imsakiya`
5. ุงุถุบุท **"Create"**

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูุณุชุฎุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ูู ููุณ ุงูุตูุญุฉุ ุงุฐูุจ ุฅูู **"Add New User"**
2. ุฃุฏุฎู:
   - **Username:** ุงุฎุชุฑ ุงุณูุงู (ูุซุงู: `ramadan_user`)
   - **Password:** ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ
3. ุงุถุบุท **"Create User"**

### ุงูุฎุทูุฉ 3: ุฑุจุท ุงููุณุชุฎุฏู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุงุฐูุจ ุฅูู **"Add User To Database"**
2. ุงุฎุชุฑ ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃุชู
3. ุงุฎุชุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช `ramadan_imsakiya`
4. ุงุถุบุท **"Add"**
5. ุชุฃูุฏ ูู ููุญ **ุฌููุน ุงูุตูุงุญูุงุช (ALL PRIVILEGES)**
6. ุงุถุบุท **"Make Changes"**

### ุงูุฎุทูุฉ 4: ุงุณุชูุฑุงุฏ ููู SQL

1. ูู phpMyAdminุ ุงุฎุชุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช `ramadan_imsakiya` ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ุงุถุบุท ุนูู ุชุจููุจ **"Import"**
3. ุงุถุบุท **"Choose File"**
4. ุงุฎุชุฑ ููู `public_html/database.sql` ูู ุงููุดุฑูุน
5. ุงุถุบุท **"Go"** ูู ุงูุฃุณูู
6. ุงูุชุธุฑ ุญุชู ุชุธูุฑ ุฑุณุงูุฉ ุงููุฌุงุญ

### ุงูุฎุทูุฉ 5: ุชุญุฏูุซ ููู ุงูุฅุนุฏุงุฏุงุช

1. ูู File Managerุ ุงุฐูุจ ุฅูู `public_html/config/`
2. ุงูุณุฎ `database.php.example` ุฅูู `database.php`
3. ุงูุชุญ `database.php` ูุนุฏูู:

```php
define('DB_HOST', 'localhost');
define('DB_NAME', 'ramadan_imsakiya');        // ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช
define('DB_USER', 'ramadan_user');            // ุงุณู ุงููุณุชุฎุฏู
define('DB_PASS', 'your_password_here');      // ูููุฉ ุงููุฑูุฑ
```

4. ุงุญูุธ ุงูููู

### ุงูุฎุทูุฉ 6: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

ุงูุชุญ ูู ุงููุชุตูุญ:
```
https://emerald-pure.com/api/test-connection.php
```

ูุฌุจ ุฃู ุชุฑู:
- โ Database config file exists
- โ Database connection successful

---

## ๐ ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู ุณูุฑูุจุช ุชููุงุฆู (ุฃุณุฑุน)

### ุงูุฎุทูุฉ 1: ุงูุญุตูู ุนูู ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูู cPanel โ MySQL Databases:
- **Database Name:** `ramadan_imsakiya`
- **Username:** `your_username`
- **Password:** `your_password`
- **Host:** ุนุงุฏุฉ `localhost`

### ุงูุฎุทูุฉ 2: ุชุนุฏูู ููู setup-database.php

1. ุงูุชุญ `public_html/setup-database.php`
2. ุนุฏูู ุงูููู ูู ุงูุฃุนูู:

```php
$db_host = 'localhost';
$db_name = 'ramadan_imsakiya';
$db_user = 'your_username';        // ุนุฏูู ููุง
$db_pass = 'your_password';       // ุนุฏูู ููุง
```

3. ุงุญูุธ ุงูููู

### ุงูุฎุทูุฉ 3: ุชุดุบูู ุงูุณูุฑูุจุช

ุงูุชุญ ูู ุงููุชุตูุญ:
```
https://emerald-pure.com/setup-database.php
```

ุงูุณูุฑูุจุช ุณูููู ุจู:
- โ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅูุดุงุก ุงูุฌุฏุงูู
- โ ุฅุนุฏุงุฏ ูู ุดูุก ุชููุงุฆูุงู

### ุงูุฎุทูุฉ 4: ุชุญุฏูุซ ููู ุงูุฅุนุฏุงุฏุงุช

1. ุนุฏูู `config/database.php` ุจููุณ ุงูุจูุงูุงุช
2. ุงุญูุธ

### ุงูุฎุทูุฉ 5: ุญุฐู ููู setup-database.php

โ๏ธ **ููู ุฌุฏุงู:** ุงุญุฐู `setup-database.php` ุจุนุฏ ุงูุงูุชูุงุก ูุฃุณุจุงุจ ุฃูููุฉ!

---

## ๐ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงููููุดุฃุฉ:

1. **orders** - ุงูุทูุจุงุช
   - `id`, `order_id`, `city`, `company_name`, etc.
   
2. **generated_files** - ุงููููุงุช ุงููููุดุฃุฉ
   - `id`, `order_id`, `pdf_path`, `image_path`
   
3. **prayer_times_cache** - Cache ูููุงููุช ุงูุตูุงุฉ (ุงุฎุชูุงุฑู)
   - `id`, `cache_key`, `cache_data`, `expires_at`

---

## โ Checklist

### ุจุนุฏ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช:

- [ ] ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉ ูู phpMyAdmin
- [ ] ุงููุณุชุฎุฏู ูุฑุจูุท ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุงูุฌุฏุงูู ููุฌูุฏุฉ (orders, generated_files)
- [ ] `config/database.php` ูุญุฏูุซ ุจุงูุจูุงูุงุช ุงูุตุญูุญุฉ
- [ ] `api/test-connection.php` ูุนูู ุจูุฌุงุญ
- [ ] `setup-database.php` ูุญุฐูู (ุฅุฐุง ุงุณุชุฎุฏูุชู)

---

## ๐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

### ุทุฑููุฉ 1: ุงุณุชุฎุฏุงู test-connection.php

```
https://emerald-pure.com/api/test-connection.php
```

### ุทุฑููุฉ 2: ุงุฎุชุจุงุฑ ูุฏูู

ุฃูุดุฆ ููู `test-db.php`:

```php
<?php
require_once 'config/database.php';

try {
    $stmt = $pdo->query("SELECT COUNT(*) FROM orders");
    $count = $stmt->fetchColumn();
    echo "โ ุงูุงุชุตุงู ูุงุฌุญ! ุนุฏุฏ ุงูุทูุจุงุช: $count";
} catch (PDOException $e) {
    echo "โ ุฎุทุฃ: " . $e->getMessage();
}
?>
```

---

## ๐๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฎุทุฃ: "Access denied for user"

**ุงูุณุจุจ:** ุจูุงูุงุช ุงููุณุชุฎุฏู ุฎุงุทุฆุฉ

**ุงูุญู:**
1. ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ูู cPanel
2. ุชุฃูุฏ ูู ุฑุจุท ุงููุณุชุฎุฏู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุฃูุฏ ูู ุงูุตูุงุญูุงุช (ALL PRIVILEGES)

### ุงูุฎุทุฃ: "Unknown database"

**ุงูุณุจุจ:** ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏุฉ

**ุงูุญู:**
1. ุฃูุดุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู cPanel
2. ุฃู ุงุณุชุฎุฏู `setup-database.php`

### ุงูุฎุทุฃ: "Table doesn't exist"

**ุงูุณุจุจ:** ุงูุฌุฏุงูู ูู ุชููุดุฃ

**ุงูุญู:**
1. ุงุณุชูุฑุฏ `database.sql` ูู phpMyAdmin
2. ุฃู ุงุณุชุฎุฏู `setup-database.php`

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู:**
   - โ๏ธ ุงุญุฐู `setup-database.php` ุจุนุฏ ุงูุงุณุชุฎุฏุงู
   - โ๏ธ ูุง ุชุฑูุน `config/database.php` ุฅูู GitHub
   - โ ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ

2. **ุงููุณุฎ ุงูุงุญุชูุงุทู:**
   - ุงุญุชูุธ ุจูุณุฎุฉ ูู `database.sql`
   - ุงุนูู backup ุฏูุฑู ูู phpMyAdmin

3. **ุงูุฃุฏุงุก:**
   - Cache ูููุงููุช ุงูุตูุงุฉ (24 ุณุงุนุฉ)
   - Indexes ุนูู ุงูุญููู ุงููููุฉ

---

## ๐ฏ ุงูุฎูุงุตุฉ ุงูุณุฑูุนุฉ

### ุงูุทุฑููุฉ ุงูุฃุณูู:

1. **cPanel โ MySQL Databases**
   - ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช: `ramadan_imsakiya`
   - ุฃูุดุฆ ูุณุชุฎุฏู ูุฑุจุทู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

2. **phpMyAdmin**
   - ุงุณุชูุฑุฏ `public_html/database.sql`

3. **File Manager**
   - ุงูุณุฎ `config/database.php.example` ุฅูู `database.php`
   - ุนุฏูู ุงูุจูุงูุงุช

4. **ุงุฎุชุจุฑ**
   - `https://emerald-pure.com/api/test-connection.php`

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-08
